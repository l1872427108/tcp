# SYN Flood 攻击原理

SYN Flood 属于典型的 DDOS 攻击，利用TCP协议缺陷，通过发送大量的半连接请求，耗费CPU和内存资源。原理就是，用客户端在短时间内伪造大量不存在的 IP 地址，并向服务端封装发送 SYN。


对于服务端而言，产生的危害：
1. 处理大量的 SYN 包并返回对应的 ACK，就会造成大量连接处于 SYN_RCVD 状态，从而沾满整个半连接队列，无法处理后续正常的请求。严重会引起网络堵塞甚至系统瘫痪。

2. 由于 都是不存在的 IP，服务端长时间收不到客户端的 ACK，会导致服务端不断重新发送数据，直到耗尽服务端资源。



## 防范
1. 启用 SYN 攻击保护的命名值位于注册表项。

2. 丰富贷款资源
SYN攻击时会消耗大量带宽资源，所以想要防范 SYN ，一个丰富的带宽资源是非常重要的，一般都是利用拥挤的带宽资源来堵死目标网络的。


3. 防火墙
利用防火墙来进行防护攻击，前提是攻击在防护带宽范围之内，保证在防火墙前面不会造成阻塞。



4. 增加 SYN 连接半连接的容量。

5. 利用 SYN Cookie 技术，在服务端接收到 SYN 后不要立即分配资源，而是根据这个 SYN 计算出一个 Cookie，连同第二次握手回复给客户端，在客户端回复 ACK 的时候带上这个 Cookie 值，服务端严重 cookie 和发之后分配连接资源。

